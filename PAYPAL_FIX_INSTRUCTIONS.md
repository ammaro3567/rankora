# ๐ง ุฅุตูุงุญ ูุดุงูู PayPal - PayPal Fix Instructions

## ๐จ ุงููุดุงูู ุงูุญุงููุฉ
1. **ุฎุทุฃ "Can not pay order for unauthorized order"** - ุงูุทูุจ ูู ูุชู ุชูููุถู
2. **ุฃุฎุทุงุก 422 ู 400** ูู PayPal API
3. **ูุดุงูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช** - ุงูุฏูุงู ุบูุฑ ููุฌูุฏุฉ
4. **ุงูุฏูุน ูุง ูุตู ูููููุน** - ูุดููุฉ ูู ูุนุงูุฌุฉ ุงูุฏูุน

## โ ุงูุญููู ุงููุทููุจุฉ

### 1. ุฅุตูุงุญ ูุงุนุฏุฉ ุงูุจูุงูุงุช
ูู ุจุชุดุบูู ููู `database_fix.sql` ูู Supabase SQL Editor:

1. ุงุฐูุจ ุฅูู [Supabase Dashboard](https://app.supabase.com)
2. ุงุฎุชุฑ ูุดุฑูุนู
3. ุงุฐูุจ ุฅูู **SQL Editor**
4. ุงูุณุฎ ูุญุชูู ููู `database_fix.sql`
5. ุงุถุบุท **Run** ูุชูููุฐ ุงูููุฏ

### 2. ุฅุตูุงุญ ููุฏ PayPal
ุชู ุฅุตูุงุญ ุงูููุฏ ูู `PricingPage.tsx`:
- โ ุฅุตูุงุญ ุงุณุชุฏุนุงุก ุฏุงูุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุฅุถุงูุฉ ูุนุงูุฌุฉ ุฃูุถู ููุฃุฎุทุงุก
- โ ุฅุถุงูุฉ `application_context` ููู PayPal
- โ ุงูุชุญูู ูู ุญุงูุฉ ุงูุฏูุน ูุจู ุงููุนุงูุฌุฉ

### 3. ุฅุนุฏุงุฏ PayPal ุจุดูู ุตุญูุญ

#### ุฃ. ุงูุชุญูู ูู Client ID
ุชุฃูุฏ ูู ุฃู `VITE_PAYPAL_CLIENT_ID` ุตุญูุญ ูู ููู `.env`:
```bash
VITE_PAYPAL_CLIENT_ID=AZXa_afC8OO7D4DcHjwyiMb05Dpf8_nWFaa3JePCybGPGVuQ9hJVmgyP0FSfxxpSYpykbvJHV6uW-ymG
```

#### ุจ. ุฅุนุฏุงุฏ PayPal Sandbox
1. ุงุฐูุจ ุฅูู [PayPal Developer Dashboard](https://developer.paypal.com)
2. ุชุฃูุฏ ูู ุฃู ุงูุชุทุจูู ูู ูุถุน **Sandbox**
3. ุชุญูู ูู ุฃู Client ID ุตุญูุญ

#### ุฌ. ุฅุนุฏุงุฏ Webhooks (ุงุฎุชูุงุฑู)
ุฅุฐุง ููุช ุชุฑูุฏ webhooks ููุงุดุชุฑุงูุงุช:
1. ุงุฐูุจ ุฅูู **Webhooks** ูู PayPal Developer
2. ุฃุถู webhook URL: `https://your-domain.netlify.app/.netlify/functions/paypal-webhook`
3. ุงุฎุชุฑ ุงูุฃุญุฏุงุซ:
   - `BILLING.SUBSCRIPTION.ACTIVATED`
   - `BILLING.SUBSCRIPTION.CANCELLED`
   - `BILLING.SUBSCRIPTION.PAYMENT.COMPLETED`

### 4. ุงุฎุชุจุงุฑ ุงูุฏูุน

#### ุฃ. ุงุณุชุฎุฏุงู ุญุณุงุจ Sandbox
1. ุงุณุชุฎุฏู ุญุณุงุจ Sandbox ููุงุฎุชุจุงุฑ
2. **Buyer Account**: `sb-buyer@business.example.com`
3. **Password**: `12345678`

#### ุจ. ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ
1. ุงุฐูุจ ุฅูู ุตูุญุฉ ุงูุชุณุนูุฑ
2. ุงุฎุชุฑ ุฎุทุฉ ูุฏููุนุฉ
3. ุงุถุบุท "Choose this plan"
4. ุงุณุชุฎุฏู ุญุณุงุจ Sandbox ููุฏูุน
5. ุชุญูู ูู ุฃู ุงูุฏูุน ููุฌุญ

### 5. ูุฑุงูุจุฉ ุงูุฃุฎุทุงุก

#### ุฃ. ูุชุญ Developer Tools
1. ุงุถุบุท `F12` ูู ุงููุชุตูุญ
2. ุงุฐูุจ ุฅูู **Console**
3. ุฑุงูุจ ุงูุฃุฎุทุงุก ุฃุซูุงุก ุงูุฏูุน

#### ุจ. ุงูุฃุฎุทุงุก ุงููุชููุนุฉ
- โ `Payment approved, capturing order...` - ุงูุฏูุน ุชูุช ุงูููุงููุฉ ุนููู
- โ `Payment captured successfully` - ุงูุฏูุน ุชู ุงูุชูุงุทู ุจูุฌุงุญ
- โ `Payment capture error` - ุฎุทุฃ ูู ุงูุชูุงุท ุงูุฏูุน
- โ `PayPal error` - ุฎุทุฃ ูู PayPal

## ๐ ุจุนุฏ ุงูุฅุตูุงุญ

### 1. ุฅุนุงุฏุฉ ุจูุงุก ุงููุดุฑูุน
```bash
npm run build
```

### 2. ูุดุฑ ุงูุชุญุฏูุซุงุช
```bash
# ุฅุฐุง ููุช ุชุณุชุฎุฏู Netlify
git add .
git commit -m "Fix PayPal payment issues"
git push

# ุฃู ุฑูุน ูููุงุช dist ูุฏููุงู
```

### 3. ุงุฎุชุจุงุฑ ููุงุฆู
1. ุงุฎุชุจุฑ ุงูุฏูุน ูุน ุญุณุงุจ Sandbox
2. ุชุญูู ูู ุฅูุดุงุก ุงูุงุดุชุฑุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. ุชุฃูุฏ ูู ุฃู ุงููุณุชุฎุฏู ููุชูู ุฅูู Dashboard

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ:

#### 1. ุชุญูู ูู Console
- ุงุจุญุซ ุนู ุฃุฎุทุงุก JavaScript
- ุชุญูู ูู ุงุณุชุฏุนุงุกุงุช API

#### 2. ุชุญูู ูู Network Tab
- ุฑุงูุจ ุทูุจุงุช PayPal
- ุชุญูู ูู ุงูุงุณุชุฌุงุจุงุช

#### 3. ุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุชุฃูุฏ ูู ูุฌูุฏ ุงูุฌุฏุงูู
- ุชุญูู ูู ูุฌูุฏ ุงูุฏูุงู

#### 4. ุชุญูู ูู Environment Variables
- ุชุฃูุฏ ูู ุตุญุฉ PayPal Client ID
- ุชุญูู ูู ุตุญุฉ Supabase credentials

## ๐ ุงูุฏุนู

ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ:
1. ุชุญูู ูู [PayPal Developer Documentation](https://developer.paypal.com/docs/)
2. ุฑุงุฌุน [Supabase Documentation](https://supabase.com/docs)
3. ุชุญูู ูู Console logs ููุญุตูู ุนูู ุชูุงุตูู ุฃูุซุฑ

## ๐ฏ ุงููุชูุฌุฉ ุงููุชููุนุฉ

ุจุนุฏ ุงูุฅุตูุงุญ:
- โ ุงูุฏูุน ูุนูู ุจุดูู ุตุญูุญ
- โ ุงูุงุดุชุฑุงูุงุช ุชููุดุฃ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุงููุณุชุฎุฏููู ููุชูููู ุฅูู Dashboard
- โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก ูู Console

---

**ููุงุญุธุฉ**: ุชุฃูุฏ ูู ุงุฎุชุจุงุฑ ูู ุดูุก ูู ุจูุฆุฉ Sandbox ูุจู ุงูุงูุชูุงู ุฅูู Production!
